<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Briefing</title>
  <style>
    :root { --bg:#0f172a; --card:#111827; --text:#e5e7eb; --muted:#94a3b8; --accent:#38bdf8; }
    * { box-sizing:border-box }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", Helvetica, Arial, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif; background:var(--bg); color:var(--text); }
    header { padding:16px 20px; border-bottom:1px solid #1f2937; position:sticky; top:0; background:linear-gradient(180deg, rgba(15,23,42,.98), rgba(15,23,42,.92)); backdrop-filter: blur(6px); z-index:10; }
    .nav { display:flex; gap:12px; align-items:center; flex-wrap:wrap }
    .nav a { color:var(--accent); text-decoration:none; font-size:14px }
    h1 { margin:0; font-size:22px; letter-spacing:.3px; }
    .sub { color:var(--muted); font-size:13px; margin-top:4px }
    .wrap { max-width:1100px; margin:0 auto; padding:22px; display:grid; grid-template-columns: 1fr; gap:18px }
    @media (min-width: 980px) { .wrap { grid-template-columns: 1.1fr 1fr; } }
    .card { background:var(--card); border:1px solid #1f2937; border-radius:16px; padding:16px; box-shadow: 0 10px 24px rgba(0,0,0,.25); }
    .card h2 { margin:0 0 10px; font-size:18px; }
    .row { display:flex; gap:10px; flex-wrap:wrap }
    .muted { color:var(--muted); font-size:13px }
    .kpi { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:10px }
    .kpi .tile { background:#0b1220; border:1px solid #1f2937; padding:10px 12px; border-radius:12px; }
    .tile .label { color:#9CA3AF; font-size:12px }
    .tile .value { font-size:16px; margin-top:4px }
    .list { list-style:none; padding:0; margin:0 }
    .list li { padding:8px 0; border-top:1px dashed #223046; }
    .list li:first-child { border-top:none }
    a { color: var(--accent); text-decoration:none }
    .pill { display:inline-block; padding:2px 8px; border:1px solid #334155; border-radius:999px; font-size:12px; color:#a5b4fc; }
    .tvwrap { border-radius:12px; overflow:hidden; border:1px solid #223046; }
    .eng { margin-top:10px; padding:10px; background:#0b1220; border-radius:10px }
    .eng .sentence { font-size:16px; margin-bottom:6px; }
    .eng .trans { color:#a5f3fc; font-size:14px; margin-bottom:6px; }
    .eng .grammar, .eng .vocab { color:#cbd5e1; font-size:13px; margin-bottom:4px; }
    .inputline { display:flex; gap:8px; align-items:center; margin-bottom:10px }
    input { background:#0b1220; color:var(--text); border:1px solid #223046; padding:8px 10px; border-radius:10px }
    button { background:#0ea5e9; color:white; border:0; padding:8px 12px; border-radius:10px; cursor:pointer }
  </style>
</head>
<body>
<header>
  <div class="nav">
    <h1>ì˜¤ëŠ˜ì˜ ë¸Œë¦¬í•‘</h1>
    <span style="flex:1"></span>
    <a href="listening.html">ì˜ì–´ ë¦¬ìŠ¤ë‹</a>
    <a href="https://news.google.com/?hl=ko&gl=KR&ceid=KR:ko" target="_blank" rel="noopener">Google ë‰´ìŠ¤</a>
  </div>
  <div class="sub" id="todayStr">ë¡œë”© ì¤‘â€¦</div>
</header>

<div class="wrap">
  <!-- â˜€ï¸ ë‚ ì”¨ -->
  <section class="card">
    <h2>â˜€ï¸ ì˜¤ëŠ˜ ë‚ ì”¨ & 7ì¼ ì˜ˆë³´ <span class="pill">Open-Meteo</span></h2>
    <div class="inputline">
      <label class="muted">ë„ì‹œ</label>
      <input id="city" placeholder="ì˜ˆ: Seoul" value="Seoul" />
      <button id="btnWeather">ì—…ë°ì´íŠ¸</button>
      <span class="muted">(ë¬´ë£Œ API, í‚¤ í•„ìš” ì—†ìŒ)</span>
    </div>
    <div id="weatherNow" class="row" style="gap:16px; align-items:baseline"></div>
    <ul id="weather7" class="list" style="margin-top:10px"></ul>
  </section>

  <!-- ğŸ”® ìš´ì„¸ -->
  <section class="card">
    <h2>ğŸ”® ì˜¤ëŠ˜ì˜ ìš´ì„¸ (1985-04-18)</h2>
    <div id="fortune" style="font-size:15px; line-height:1.5"></div>
    <div id="zodiacLabel" class="muted"></div>
  </section>

  <!-- ğŸ“Š ì „ì¼ ì¢…ê°€ (JSON ìš°ì„ , Alpha ë³´ì¡°) -->
  <section class="card" style="grid-column:1/-1">
    <h2>ğŸ“Š ì „ì¼ ì¢…ê°€ (ë¯¸êµ­/í•œêµ­) <span class="pill">ì•¼ê°„ ìë™ìˆ˜ì§‘</span> <span class="pill">Alpha Vantage ë³´ì¡°</span></h2>
    <div class="kpi">
      <div class="tile"><div class="label">S&P 500</div><div class="value" id="spxClose">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</div></div>
      <div class="tile"><div class="label">NASDAQ</div><div class="value" id="ixicClose">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</div></div>
      <div class="tile"><div class="label">Dow Jones</div><div class="value" id="djiClose">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</div></div>
      <div class="tile"><div class="label">KOSPI</div><div class="value" id="kospiClose">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</div></div>
    </div>
    <div class="muted" id="closeDate" style="margin-top:6px"></div>
    <div class="muted" style="margin-top:6px">ìš°ì„ ìˆœìœ„: <b>data/close.json</b> â†’ (ì‹¤íŒ¨ ì‹œ) Alpha Vantageë¡œ <i>SPY/QQQ/DIA/069500.KS</i> í”„ë¡ì‹œ ì¡°íšŒ</div>
  </section>

  <!-- ğŸ“ˆ ì°¨íŠ¸ ìœ„ì ¯ -->
  <section class="card" style="grid-column:1/-1">
    <h2>ğŸ“ˆ ì§€ìˆ˜ ëª¨ë‹ˆí„° (ë¯¸êµ­/í•œêµ­) <span class="pill">TradingView ìœ„ì ¯</span></h2>
    <div class="tvwrap">
      <div class="tradingview-widget-container" style="height:400px">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
        {
          "colorTheme": "dark",
          "dateRange": "1D",
          "showChart": true,
          "locale": "kr",
          "width": "100%",
          "height": "400",
          "isTransparent": false,
          "showSymbolLogo": true,
          "tabs": [
            { "title": "ë¯¸êµ­", "symbols": [
              {"s":"FOREXCOM:SPXUSD","d":"S&P 500"},
              {"s":"NASDAQ:IXIC","d":"NASDAQ"},
              {"s":"DJ:DJI","d":"Dow Jones"} ] },
            { "title": "í•œêµ­", "symbols": [
              {"s":"KRX:KOSPI","d":"KOSPI"},
              {"s":"KRX:KOSDAQ","d":"KOSDAQ"} ] }
          ]
        }
        </script>
      </div>
    </div>
  </section>

  <!-- ğŸ‡ºğŸ‡¸/ğŸŒ ë‰´ìŠ¤ ë§í¬ -->
  <section class="card">
    <h2>ğŸ‡ºğŸ‡¸ ë¯¸êµ­ ì¦ì‹œ ì´ìŠˆ</h2>
    <ul id="usStockNews" class="list"></ul>
  </section>
  <section class="card">
    <h2>ğŸ’µ ë¯¸êµ­ ê²½ì œ ì´ìŠˆ í•œì¤„ ìš”ì•½</h2>
    <ul id="usEconNews" class="list"></ul>
  </section>
  <section class="card">
    <h2>ğŸ›ï¸ ë¯¸êµ­ ì •ì¹˜ ì´ìŠˆ í•œì¤„ ìš”ì•½</h2>
    <ul id="usPolNews" class="list"></ul>
  </section>
  <section class="card" style="grid-column:1/-1">
    <h2>ğŸŒ ì„¸ê³„ ì´ìŠˆ (ì „ìŸÂ·ì •ì¹˜Â·ì—°ì˜ˆ ë“±)</h2>
    <ul id="worldNews" class="list"></ul>
  </section>

  <!-- ğŸ—£ ì˜ì–´ í•œë§ˆë”” -->
  <section class="card" style="grid-column:1/-1">
    <h2>ğŸ—£ ì˜ì–´ í•œë§ˆë”” (ë¬¸ì¥Â·ë²ˆì—­Â·ë¬¸ë²•Â·ë‹¨ì–´)</h2>
    <div class="eng">
      <div class="sentence" id="engSentence"></div>
      <div class="trans" id="engTrans"></div>
      <div class="grammar" id="engGrammar"></div>
      <div class="vocab" id="engVocab"></div>
    </div>
  </section>
</div>

<footer class="sub" style="text-align:center; padding:16px">
  Â© <span id="year"></span> Daily Briefing â€” ìë™ìˆ˜ì§‘ JSON ìš°ì„ , Alpha í‚¤ëŠ” ë³´ì¡°(ê³µê°œ ë ˆí¬ë©´ í‚¤ ë…¸ì¶œ ì£¼ì˜)
</footer>

<script>
// ===== ì„¤ì • =====
const CONFIG = {
  NEWSAPI_KEY: '',             // (ì„ íƒ) ìˆìœ¼ë©´ ë‰´ìŠ¤ ìë™ í—¤ë“œë¼ì¸
  ALPHA_KEY: 'CH0Y3JELI0N6KNUP',               // ë³´ì¡°ìš© Alpha Vantage í‚¤. ê³µê°œ ë ˆí¬ë©´ ë¹„ì›Œë‘ì„¸ìš”. (ì˜ˆ: 'CH0Y3JELI0N6KNUP')
  birthday: '1985-04-18'
};

// ===== ìœ í‹¸ =====
const $ = (q) => document.querySelector(q);
$('#todayStr').textContent = `ëŒ€í•œë¯¼êµ­ í‘œì¤€ì‹œ â€” ${new Date().toLocaleString('ko-KR', { timeZone: 'Asia/Seoul' })}`;
$('#year').textContent = new Date().getFullYear();
function fmtDate(d){ return new Date(d).toLocaleDateString('ko-KR', { weekday:'short', month:'numeric', day:'numeric' }); }

// ===== ì§€ì˜¤ì½”ë”© & ë‚ ì”¨(Open-Meteo, ë¬´í‚¤)
async function geocode(city){
  const u = `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1&language=ko&format=json`;
  const r = await fetch(u); const j = await r.json();
  if(!j.results?.length) throw new Error('ë„ì‹œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
  const { latitude, longitude, name, country } = j.results[0];
  return { latitude, longitude, name, country };
}
async function loadWeather(city){
  try{
    const g = await geocode(city);
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${g.latitude}&longitude=${g.longitude}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_sum&timezone=Asia%2FSeoul`;
    const r = await fetch(url); const j = await r.json();
    const wmap = {0:'ë§‘ìŒ',1:'ëŒ€ì²´ë¡œ ë§‘ìŒ',2:'ë¶€ë¶„ íë¦¼',3:'íë¦¼',45:'ì•ˆê°œ',48:'ì„œë¦¬ ì•ˆê°œ',51:'ì´ìŠ¬ë¹„',61:'ê°€ë²¼ìš´ ë¹„',63:'ë³´í†µ ë¹„',65:'ê°•í•œ ë¹„',71:'ê°€ë²¼ìš´ ëˆˆ',73:'ë³´í†µ ëˆˆ',75:'ê°•í•œ ëˆˆ',80:'ì†Œë‚˜ê¸°',95:'ì²œë‘¥ë²ˆê°œ'};
    const c = j.current;
    $('#weatherNow').innerHTML = `
      <div class="tile"><div class="label">ì§€ì—­</div><div class="value">${g.name} (${g.country})</div></div>
      <div class="tile"><div class="label">í˜„ì¬ ê¸°ì˜¨</div><div class="value">${Math.round(c.temperature_2m)}Â°C</div></div>
      <div class="tile"><div class="label">ì²´ê°</div><div class="value">${Math.round(c.apparent_temperature)}Â°C</div></div>
      <div class="tile"><div class="label">ìŠµë„</div><div class="value">${c.relative_humidity_2m}%</div></div>
      <div class="tile"><div class="label">ë‚ ì”¨</div><div class="value">${wmap[c.weather_code] ?? 'â€”'}</div></div>`;
    const d = j.daily;
    $('#weather7').innerHTML = d.time.map((t,i)=>`<li>${fmtDate(t)} â€” ìµœê³  ${Math.round(d.temperature_2m_max[i])}Â° / ìµœì € ${Math.round(d.temperature_2m_min[i])}Â° Â· ê°•ìˆ˜ ${d.precipitation_sum[i]}mm Â· ${wmap[d.weather_code[i]]??''}</li>`).join('');
  }catch(e){ $('#weatherNow').textContent = 'ë‚ ì”¨ ë¡œë”© ì‹¤íŒ¨: ' + e.message }
}
$('#btnWeather').addEventListener('click', ()=> loadWeather($('#city').value.trim()||'Seoul'));
loadWeather('Seoul');

// ===== ìš´ì„¸
function zodiacFromBirthday(ymd){
  const d=new Date(ymd); const m=d.getMonth()+1, day=d.getDate();
  const z=[['capricorn',1,19,'ì—¼ì†Œìë¦¬'],['aquarius',2,18,'ë¬¼ë³‘ìë¦¬'],['pisces',3,20,'ë¬¼ê³ ê¸°ìë¦¬'],['aries',4,19,'ì–‘ìë¦¬'],['taurus',5,20,'í™©ì†Œìë¦¬'],['gemini',6,21,'ìŒë‘¥ì´ìë¦¬'],['cancer',7,22,'ê²Œìë¦¬'],['leo',8,22,'ì‚¬ììë¦¬'],['virgo',9,22,'ì²˜ë…€ìë¦¬'],['libra',10,22,'ì²œì¹­ìë¦¬'],['scorpio',11,22,'ì „ê°ˆìë¦¬'],['sagittarius',12,21,'ì‚¬ìˆ˜ìë¦¬'],['capricorn',12,31,'ì—¼ì†Œìë¦¬']];
  let name='capricorn', label='ì—¼ì†Œìë¦¬';
  for(const [k,mm,dd,lab] of z){ if(m<mm || (m===mm && day<=dd)){ name=k; label=lab; break; } }
  return { name, label };
}
function seededPick(list, seed){ let h=0; for(const ch of seed) h=(h*31+ch.charCodeAt(0))>>>0; return list[h%list.length]; }
const fortunes=['ì‘ì€ ì„ íƒì´ í° ê¸°íšŒë¥¼ ë¶€ë¦…ë‹ˆë‹¤.','ë§Œë‚¨ì´ í–‰ìš´ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.','ì •ë³´ê°€ í˜ì…ë‹ˆë‹¤. ë‰´ìŠ¤ë¥¼ ê°€ê¹Œì´ í•˜ì„¸ìš”.','ì»¨ë””ì…˜ ì¡°ì ˆì— ì‹ ê²½ ì“°ë©´ ì„±ê³¼ê°€ í½ë‹ˆë‹¤.','í˜‘ì—…ì´ ë‹µì…ë‹ˆë‹¤. ì†ì„ ë‚´ë°€ì–´ ë³´ì„¸ìš”.','ê³¼ê°í•œ ì •ë¦¬ê°€ íš¨ìœ¨ì„ ë§Œë“­ë‹ˆë‹¤.','ìƒˆë¡œìš´ ì œì•ˆì´ ë“¤ì–´ì˜µë‹ˆë‹¤. ì—´ë¦° ë§ˆìŒìœ¼ë¡œ.','ì§€ì¶œ ê´€ë¦¬ì— ì‹ ê²½ ì“°ë©´ ìˆ˜ìµì´ ì»¤ì§‘ë‹ˆë‹¤.','ì˜¤ëŠ˜ì˜ í‚¤ì›Œë“œ: íƒ€ì´ë°.'];
(function showFortune(){
  const z = zodiacFromBirthday(CONFIG.birthday);
  $('#zodiacLabel').textContent = `(${z.label}, ${CONFIG.birthday})`;
  const seed = new Date().toISOString().slice(0,10) + '|' + z.name;
  $('#fortune').textContent = seededPick(fortunes, seed);
})();

// ===== ë‰´ìŠ¤ ë§í¬(ê¸°ë³¸) + (ì„ íƒ) NewsAPI
const googleNewsLinks = {
  usStock: [
    { t:'ë¯¸êµ­ ì¦ì‹œ â€“ Google ë‰´ìŠ¤', u:'https://news.google.com/search?q=US%20stock%20market&hl=en-US&gl=US&ceid=US:en' },
    { t:'FOMC / ì—°ì¤€', u:'https://news.google.com/search?q=FOMC%20Fed&hl=en-US&gl=US&ceid=US:en' },
    { t:'NVIDIA / TSLA ì‹¤ì ', u:'https://news.google.com/search?q=earnings%20NVIDIA%20TSLA&hl=en-US&gl=US&ceid=US:en' }
  ],
  usEconomy: [{ t:'ë¯¸êµ­ ê²½ì œ â€“ Google ë‰´ìŠ¤', u:'https://news.google.com/search?q=US%20economy%20CPI%20jobs%20inflation&hl=en-US&gl=US&ceid=US:en' }],
  usPolitics: [{ t:'ë¯¸êµ­ ì •ì¹˜ â€“ Google ë‰´ìŠ¤', u:'https://news.google.com/search?q=US%20politics%20Congress%20White%20House&hl=en-US&gl=US&ceid=US:en' }],
  world: [{ t:'ì„¸ê³„ ì´ìŠˆ â€“ Google ë‰´ìŠ¤', u:'https://news.google.com/topics/CAAqJggKIiBDQkFTRWdvSUwyMHZNRFZxYUdjU0FtVnVLQUFQAQ?hl=ko&gl=KR&ceid=KR:ko' }]
};
function renderLinks(id, arr){ $(id).innerHTML = arr.map(x=>`<li><a href="${x.u}" target="_blank" rel="noopener">${x.t}</a></li>`).join(''); }
renderLinks('#usStockNews', googleNewsLinks.usStock);
renderLinks('#usEconNews', googleNewsLinks.usEconomy);
renderLinks('#usPolNews', googleNewsLinks.usPolitics);
renderLinks('#worldNews', googleNewsLinks.world);

// (ì„ íƒ) NewsAPI í—¤ë“œë¼ì¸ 5ê±´
async function tryNewsApi(q, el){
  if(!CONFIG.NEWSAPI_KEY) return;
  try{
    const url=`https://newsapi.org/v2/everything?q=${encodeURIComponent(q)}&pageSize=5&language=en&sortBy=publishedAt&apiKey=${CONFIG.NEWSAPI_KEY}`;
    const r=await fetch(url); const j=await r.json();
    if(j.articles){ el.innerHTML = j.articles.map(a=>`<li><a href="${a.url}" target="_blank" rel="noopener">${a.title}</a> <span class="muted">â€” ${new Date(a.publishedAt).toLocaleString('ko-KR')}</span></li>`).join(''); }
  }catch(_){}
}
tryNewsApi('US stock market OR stocks', $('#usStockNews'));
tryNewsApi('US economy inflation jobs CPI PCE', $('#usEconNews'));
tryNewsApi('US politics Congress White House election', $('#usPolNews'));
tryNewsApi('global geopolitics war conflict entertainment', $('#worldNews'));

// ===== ì˜ì–´ í•œë§ˆë””
const PHRASES = [
  { en:'Keep your focus, and the rest will follow.', ko:'ì§‘ì¤‘ì„ ìœ ì§€í•˜ë©´ ë‚˜ë¨¸ì§€ëŠ” ë”°ë¼ì˜µë‹ˆë‹¤.', grammar:'ëª…ë ¹ë¬¸ + ë“±ìœ„ì ‘ì†ì‚¬ and + ë…ë¦½ì ˆ.', vocab:[['focus','ì§‘ì¤‘'],['follow','ë”°ë¼ì˜¤ë‹¤']] },
  { en:'Small steps compound into big gains.', ko:'ì‘ì€ ê±¸ìŒì´ í° ì„±ê³¼ë¡œ ìŒ“ì…ë‹ˆë‹¤.', grammar:'compound into: ~ë¡œ ëˆ„ì ë˜ë‹¤.', vocab:[['compound into','~ë¡œ ëˆ„ì ë˜ë‹¤'],['gain','ì„±ê³¼']] },
  { en:'Make it simple, then make it better.', ko:'ë¨¼ì € ë‹¨ìˆœí•˜ê²Œ, ê·¸ë‹¤ìŒ ë” ì¢‹ê²Œ ë§Œë“œì„¸ìš”.', grammar:'ì—°ì† ëª…ë ¹ë¬¸.', vocab:[['simple','ë‹¨ìˆœí•œ'],['better','ë” ë‚˜ì€']] }
];
(function renderPhrase(){
  const today = new Date().toISOString().slice(0,10);
  let h=0; for(const ch of (today+CONFIG.birthday)) h=(h*31+ch.charCodeAt(0))>>>0;
  const pick = PHRASES[h%PHRASES.length];
  $('#engSentence').textContent = pick.en;
  $('#engTrans').textContent = pick.ko;
  $('#engGrammar').textContent = 'ë¬¸ë²•: ' + pick.grammar;
  $('#engVocab').textContent = 'ë‹¨ì–´: ' + pick.vocab.map(([w,m])=>`${w}(${m})`).join(', ');
})();

// ===== ì „ì¼ ì¢…ê°€: JSON ìš°ì„  â†’ Alpha ë³´ì¡°
function setClose(id,val){ const el=$(id); if(typeof val==='number'){ el.textContent = val.toLocaleString('ko-KR'); } }
async function loadFromJson(){
  try{
    const r = await fetch('data/close.json?ts=' + Date.now());
    if(!r.ok) throw new Error('no json');
    const j = await r.json();
    if(j?.values){
      setClose('#spxClose', j.values.SPX);
      setClose('#ixicClose', j.values.IXIC);
      setClose('#djiClose',  j.values.DJI);
      setClose('#kospiClose',j.values.KOSPI);
      if(j.date) $('#closeDate').textContent = 'ê¸°ì¤€ì¼: ' + j.date;
      return true;
    }
  }catch(_){}
  return false;
}
async function loadFromAlpha(){
  if(!CONFIG.ALPHA_KEY) return false;
  const tiles=[{id:'#spxClose',sym:'SPY'},{id:'#ixicClose',sym:'QQQ'},{id:'#djiClose',sym:'DIA'},{id:'#kospiClose',sym:'069500.KS'}];
  const fetchDaily=async (s)=>{ const u=`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${encodeURIComponent(s)}&apikey=${CONFIG.ALPHA_KEY}`; const r=await fetch(u); return r.json(); };
  let when='';
  for(const it of tiles){
    try{
      const j=await fetchDaily(it.sym);
      const series=j['Time Series (Daily)'];
      if(series){
        const dates=Object.keys(series).sort().reverse();
        const d0=dates[0]; const close=Number(series[d0]['4. close']);
        setClose(it.id, close); when = when || d0;
      }
    }catch(_){}
  }
  if(when){ $('#closeDate').textContent='ê¸°ì¤€ì¼(í”„ë¡ì‹œ): '+when; return true; }
  return false;
}
(async function(){
  const ok = await loadFromJson();
  if(!ok) await loadFromAlpha();
})();
</script>
</body>
</html>
